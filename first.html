<!DOCTYPE html>
<head>
        <meta charset="utf-8">
        <link href="https://atbasu.github.io/geomap/d3-geomap.css" rel="stylesheet">
        <script src="https://unpkg.com/d3@5.16.0/dist/d3.min.js"></script>
        <script src="https://unpkg.com/topojson@3/dist/topojson.min.js"></script>
    </head>

<!-- Create a div where the graph will take place -->
<body onload='init()'>
<div class="container" id="container">
        <!-- Header -->
        <div class="grids" style="background-color:#e5e5e5;padding:15px;text-align:center;display: block;" id="header">
            <h1>
                Analysis of International Football Games(1872-2018)
            </h1>
            <div align='left'>
            	<p>
                Between 1872 and 2018, <b>41586</b> international football matches were played. However, due the major geopolitical changes that have transpired during this time many of the countries that have games listed in the dataset have either been assimilated into bigger nations or split up into parts of different nations. To account for this the dataset was cleaned and the updated dataset can be found <a href='https://atbasu.github.io/total_games.csv' download>here</a>. 
                </p>
            </div>
        </div>
</div>
<div align='center' class="card" style="background-color: transparent;">
        <button class="btn active nav-btn">Home</button>
        <button class="btn nav-btn">Games</button>
        <button class="btn nav-btn">Wins/Losses</button>
        <button class="btn nav-btn">Goals</button>
        <button class="btn" onclick="plusDivs(-1)">❮ Prev</button>
        <button class="btn" onclick="plusDivs(1)">Next ❯</button>
    </div>

<!-- Create a div where the graph will take place -->
<center>
	<div class="d3-geomap" id="map" style="width:1140px;height:593.75px;"></div>
</center>
<div>
	<h2>Which teams played the largest number of matches throughout history?</h2>
	<p>From the map it can be seen that the top 5 countries to have played the most number of international matches are:
		<ol>
			<li>Germany - 1260</li>
			<li>Sweden - 1048</li>
			<li>Brazil - 981</li>
			<li>Argentina - 980</li>
			<li>Hungary - 936</li>
		</ol>
		Hover over countries to see their match count and double click on any point on the map to zoom in/out.
	</p>
</div>
<div id="my_dataviz"></div>
<div id="tooltip"></div>

<script>
async function init() {

var format = function(d) {
    d = d;
    return d3.format(',.00f')(d);
}    
var map = d3.choropleth()
    .geofile('https://atbasu.github.io/geomap/topojson/world/countries.json')
    .colors(d3.schemeYlGnBu[9])
    .column('total')
    .format(format)
    .legend(true)
    .unitId('iso3');


d3.csv('https://atbasu.github.io/total_games.csv').then(data => {
    var selection = d3.select('#map').datum(data);
    map.draw(selection);
});	

var margin = {top: 10, right: 10, bottom: 10, left: 10},
  width = 1280 - margin.left - margin.right,
  height = 800 - margin.top - margin.bottom;
	

// append the svg object to the body of the page
var bar_svg = d3.select("#my_dataviz")
	.append("svg")
		.attr("width", width + margin.left + margin.right)
		.attr("height", height + margin.top + margin.bottom)
		.append("g")
			.attr("transform","translate(" + margin.left + "," + margin.top + ")");


//d3.select('#tooltip')
//.attr('style', 'position: absolute; opacity: 0;');
// Read data
d3.json('https://atbasu.github.io/games_split.json', function(data) {
    console.log(data);
});
    
}

    var slideIndex = 1;
    showDivs(slideIndex);

    function plusDivs(n) {
      showDivs(slideIndex += n);
    }

    function currentDiv(n) {
      showDivs(slideIndex = n);
    }

    function showDivs(n) {

      var i;
      // var x = document.getElementsByClassName("grids");
      var length = 5;
      var navBtns = document.getElementsByClassName("nav-btn");
      for (i = 0; i < navBtns.length; i++) {
        navBtns[i].className = navBtns[i].className.replace(" active", "");
      }
      if (n == 0) {
        window.location.href = "index.html";
      }
      if (n == 2) {
        window.location.href = "second.html";
      }
      navBtns[slideIndex].className += " active";
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
  </script>
</script>
  

</body>
    <script src="https://atbasu.github.io/geomap/d3-geomap.min.js"></script>
</html>