<!DOCTYPE html>
<style>
body {
  font-family: 'Open Sans', sans-serif;
}
.axis .domain {
  display: none;
}
</style>

<head>
    <meta charset="utf-8">
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body onload='init()'>
<div class="container" id="container">
        <!-- Header -->
        <div class="grids" style="background-color:#e5e5e5;padding:15px;text-align:center;display: block;" id="header">
            <h1>
                Analysis of International Football Games(1872-2018)
            </h1>
            <div align='left'>
            	<p>
                Between 1872 and 2018, <b>41586</b> international football matches were played. However, due the major geopolitical changes that have transpired during this time many of the countries that have games listed in the dataset have either been assimilated into bigger nations or split up into parts of different nations. To account for this the dataset was cleaned and the updated dataset can be found <a href='https://atbasu.github.io/total_games.csv' download>here</a>. 
                </p>
            </div>
        </div>
</div>
<div align='center' class="card" style="background-color: transparent;">
	<button class="btn active nav-btn">Home</button>
    <button class="btn nav-btn">Games</button>
    <button class="btn nav-btn">Wins/Losses</button>
    <button class="btn nav-btn">Goals</button>
    <button class="btn" onclick="plusDivs(-1)">❮ Prev</button>
    <button class="btn" onclick="plusDivs(1)">Next ❯</button>
</div>
<center>
	<div id="win_loss">
		<svg width="1280" height="800"></svg>
	</div>
</center>
<div>
	<h2>Which teams had the highest and lowest win/loss ratios over the years?</h2>
	<p>From the map it can be seen that the top 5 countries to have played the most number of international matches are:
		<ol>
			<li>Germany - 1260</li>
			<li>Sweden - 1048</li>
			<li>Brazil - 981</li>
			<li>Argentina - 980</li>
			<li>Hungary - 936</li>
		</ol>
		Hover over countries to see their match count and double click on any point on the map to zoom in/out.
	</p>
</div>
<center>
	<div id="win_split">
		<svg width="1280" height="800"></svg>
	</div>
</center>
<div>
	<h2>Which teams have the most number of wins throughout history?</h2>
	<p>From the map it can be seen that the top 5 countries to have played the most number of international matches are:
		<ol>
			<li>Germany - 1260</li>
			<li>Sweden - 1048</li>
			<li>Brazil - 981</li>
			<li>Argentina - 980</li>
			<li>Hungary - 936</li>
		</ol>
		Hover over countries to see their match count and double click on any point on the map to zoom in/out.
	</p>
</div>
<center>
	<div id="loss_split">
		<svg width="1280" height="800"></svg>
	</div>
</center>
<div>
	<h2>Which teams have the most number of wins throughout history?</h2>
	<p>From the map it can be seen that the top 5 countries to have played the most number of international matches are:
		<ol>
			<li>Germany - 1260</li>
			<li>Sweden - 1048</li>
			<li>Brazil - 981</li>
			<li>Argentina - 980</li>
			<li>Hungary - 936</li>
		</ol>
		Hover over countries to see their match count and double click on any point on the map to zoom in/out.
	</p>
</div>
<script>
async function init() {
// create the svg
var wl_svg = d3.select("#win_split")
				.select("svg"),
				 margin = {top: 20, right: 20, bottom: 30, left: 40},
				  width = +wl_svg.attr("width") - margin.left - margin.right,
				  height = +wl_svg.attr("height") - margin.top - margin.bottom,
				  g = wl_svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// set x scale
var wl_x = d3.scaleBand()
    .rangeRound([0, width])
    .paddingInner(0.05)
    .align(0.1);

// set y scale
var wl_y = d3.scaleLinear()
    .rangeRound([height, 0]);

// set the colors
var wl_z = d3.scaleOrdinal()
    .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

// load the csv and create the chart
d3.csv("https://atbasu.github.io/games_wl.csv", function(d, i, columns) {
  for (i = 1, t = 0; i < columns.length; ++i) t += d[columns[i]] = +d[columns[i]];
  d.total = t;
  return d;
}, function(error, data) {
  if (error) throw error;

  var wl_keys = data.columns.slice(1);

  data.sort(function(a, b) { return b.total - a.total; });
  wl_x.domain(data.map(function(d) { return d.Country; }));
  wl_y.domain([0, d3.max(data, function(d) { return d.total; })]).nice();
  wl_z.domain(wl_keys);

  g.append("g")
    .selectAll("g")
    .data(d3.stack().keys(wl_keys)(data))
    .enter().append("g")
      .attr("fill", function(d) { return wl_z(d.key); })
    .selectAll("rect")
    .data(function(d) { return d; })
    .enter().append("rect")
      .attr("x", function(d) { return wl_x(d.data.Country); })
      .attr("y", function(d) { return wl_y(d[1]); })
      .attr("height", function(d) { return wl_y(d[0]) - wl_y(d[1]); })
      .attr("width", wl_x.bandwidth())
    .on("mouseover", function() { wl_tooltip.style("display", null); })
    .on("mouseout", function() { wl_tooltip.style("display", "none"); })
    .on("mousemove", function(d) {
      console.log(d.data);
      console.log(wl_keys);
      var wl_xPosition = d3.mouse(this)[0] - 5;
      var wl_yPosition = d3.mouse(this)[1] - 5;
      wl_tooltip.attr("transform", "translate(" + wl_xPosition + "," + wl_yPosition + ")");
      wl_tooltip.select("text").text(d.data.Country +" :\n"+(d[1]-d[0])+"/"+d.data.total);
    });

  g.append("g")
      .attr("class", "axis")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(wl_x))
      .selectAll("text")
      	.style("text-anchor", "end")
      	.attr("dx", "-.8em")
      	.attr("dy", ".15em")
      	.attr("transform", "rotate(-65)");

  g.append("g")
      .attr("class", "axis")
      .call(d3.axisLeft(wl_y).ticks(null, "s"))
    .append("text")
      .attr("x", 2)
      .attr("y", wl_y(wl_y.ticks().pop()) + 0.5)
      .attr("dy", "0.32em")
      .attr("fill", "#000")
      .attr("font-weight", "bold")
      .attr("text-anchor", "start");

  var wl_legend = g.append("g")
      .attr("font-family", "sans-serif")
      .attr("font-size", 10)
      .attr("text-anchor", "end")
    .selectAll("g")
    .data(wl_keys.slice().reverse())
    .enter().append("g")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  wl_legend.append("rect")
      .attr("x", width - 19)
      .attr("width", 19)
      .attr("height", 19)
      .attr("fill", wl_z);

  wl_legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9.5)
      .attr("dy", "0.32em")
      .text(function(d) { return d; });
});

  // Prep the tooltip bits, initial display is hidden
  var wl_tooltip = wl_svg.append("g")
    .attr("class", "tooltip")
    .style("display", "none");
      
  wl_tooltip.append("rect")
    .attr("width", 60)
    .attr("height", 20)
    .attr("fill", "white")
    .style("opacity", 0.5);

  wl_tooltip.append("text")
    .attr("x", 30)
    .attr("dy", "1.2em")
    .style("text-anchor", "middle")
    .attr("font-size", "12px")
    .attr("font-weight", "bold");
    
// create the svg
var win_svg = d3.select("#win_split")
				.select("svg"),
				 margin = {top: 20, right: 20, bottom: 30, left: 40},
				  width = +win_svg.attr("width") - margin.left - margin.right,
				  height = +win_svg.attr("height") - margin.top - margin.bottom,
				  g = win_svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// set x scale
var win_x = d3.scaleBand()
    .rangeRound([0, width])
    .paddingInner(0.05)
    .align(0.1);

// set y scale
var win_y = d3.scaleLinear()
    .rangeRound([height, 0]);

// set the colors
var win_z = d3.scaleOrdinal()
    .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

// load the csv and create the chart
d3.csv("https://atbasu.github.io/game_win.csv", function(d, i, columns) {
  for (i = 1, t = 0; i < columns.length; ++i) t += d[columns[i]] = +d[columns[i]];
  d.total = t;
  return d;
}, function(error, data) {
  if (error) throw error;

  var win_keys = data.columns.slice(1);

  data.sort(function(a, b) { return b.total - a.total; });
  win_x.domain(data.map(function(d) { return d.Country; }));
  win_y.domain([0, d3.max(data, function(d) { return d.total; })]).nice();
  win_z.domain(win_keys);

  g.append("g")
    .selectAll("g")
    .data(d3.stack().keys(win_keys)(data))
    .enter().append("g")
      .attr("fill", function(d) { return win_z(d.key); })
    .selectAll("rect")
    .data(function(d) { return d; })
    .enter().append("rect")
      .attr("x", function(d) { return win_x(d.data.Country); })
      .attr("y", function(d) { return win_y(d[1]); })
      .attr("height", function(d) { return win_y(d[0]) - win_y(d[1]); })
      .attr("width", win_x.bandwidth())
    .on("mouseover", function() { win_tooltip.style("display", null); })
    .on("mouseout", function() { win_tooltip.style("display", "none"); })
    .on("mousemove", function(d) {
      console.log(d.data);
      console.log(win_keys);
      var win_xPosition = d3.mouse(this)[0] - 5;
      var win_yPosition = d3.mouse(this)[1] - 5;
      win_tooltip.attr("transform", "translate(" + win_xPosition + "," + win_yPosition + ")");
      win_tooltip.select("text").text(d.data.Country +" :\n"+(d[1]-d[0])+"/"+d.data.total);
    });

  g.append("g")
      .attr("class", "axis")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(win_x))
      .selectAll("text")
      	.style("text-anchor", "end")
      	.attr("dx", "-.8em")
      	.attr("dy", ".15em")
      	.attr("transform", "rotate(-65)");

  g.append("g")
      .attr("class", "axis")
      .call(d3.axisLeft(win_y).ticks(null, "s"))
    .append("text")
      .attr("x", 2)
      .attr("y", win_y(win_y.ticks().pop()) + 0.5)
      .attr("dy", "0.32em")
      .attr("fill", "#000")
      .attr("font-weight", "bold")
      .attr("text-anchor", "start");

  var win_legend = g.append("g")
      .attr("font-family", "sans-serif")
      .attr("font-size", 10)
      .attr("text-anchor", "end")
    .selectAll("g")
    .data(win_keys.slice().reverse())
    .enter().append("g")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  win_legend.append("rect")
      .attr("x", width - 19)
      .attr("width", 19)
      .attr("height", 19)
      .attr("fill", win_z);

  win_legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9.5)
      .attr("dy", "0.32em")
      .text(function(d) { return d; });
});

  // Prep the tooltip bits, initial display is hidden
  var win_tooltip = win_svg.append("g")
    .attr("class", "tooltip")
    .style("display", "none");
      
  win_tooltip.append("rect")
    .attr("width", 80)
    .attr("height", 20)
    .attr("fill", "white")
    .style("opacity", 0.5);

  win_tooltip.append("text")
    .attr("x", 40)
    .attr("dy", "1.2em")
    .style("text-anchor", "middle")
    .attr("font-size", "12px")
    .attr("font-weight", "bold");

// create the svg
var loss_svg = d3.select("#win_split")
				.select("svg"),
				 margin = {top: 20, right: 20, bottom: 30, left: 40},
				  width = +loss_svg.attr("width") - margin.left - margin.right,
				  height = +loss_svg.attr("height") - margin.top - margin.bottom,
				  g = loss_svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// set x scale
var loss_x = d3.scaleBand()
    .rangeRound([0, width])
    .paddingInner(0.05)
    .align(0.1);

// set y scale
var loss_y = d3.scaleLinear()
    .rangeRound([height, 0]);

// set the colors
var loss_z = d3.scaleOrdinal()
    .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

// load the csv and create the chart
d3.csv("https://atbasu.github.io/games_wl.csv", function(d, i, columns) {
  for (i = 1, t = 0; i < columns.length; ++i) t += d[columns[i]] = +d[columns[i]];
  d.total = t;
  return d;
}, function(error, data) {
  if (error) throw error;

  var loss_keys = data.columns.slice(1);

  data.sort(function(a, b) { return b.total - a.total; });
  loss_x.domain(data.map(function(d) { return d.Country; }));
  loss_y.domain([0, d3.max(data, function(d) { return d.total; })]).nice();
  loss_z.domain(loss_keys);

  g.append("g")
    .selectAll("g")
    .data(d3.stack().keys(loss_keys)(data))
    .enter().append("g")
      .attr("fill", function(d) { return loss_z(d.key); })
    .selectAll("rect")
    .data(function(d) { return d; })
    .enter().append("rect")
      .attr("x", function(d) { return loss_x(d.data.Country); })
      .attr("y", function(d) { return loss_y(d[1]); })
      .attr("height", function(d) { return loss_y(d[0]) - loss_y(d[1]); })
      .attr("width", loss_x.bandwidth())
    .on("mouseover", function() { loss_tooltip.style("display", null); })
    .on("mouseout", function() { loss_tooltip.style("display", "none"); })
    .on("mousemove", function(d) {
      console.log(d.data);
      console.log(loss_keys);
      var loss_xPosition = d3.mouse(this)[0] - 5;
      var loss_yPosition = d3.mouse(this)[1] - 5;
      loss_tooltip.attr("transform", "translate(" + loss_xPosition + "," + loss_yPosition + ")");
      loss_tooltip.select("text").text(d.data.Country +" :\n"+(d[1]-d[0])+"/"+d.data.total);
    });

  g.append("g")
      .attr("class", "axis")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(loss_x))
      .selectAll("text")
      	.style("text-anchor", "end")
      	.attr("dx", "-.8em")
      	.attr("dy", ".15em")
      	.attr("transform", "rotate(-65)");

  g.append("g")
      .attr("class", "axis")
      .call(d3.axisLeft(loss_y).ticks(null, "s"))
    .append("text")
      .attr("x", 2)
      .attr("y", loss_y(loss_y.ticks().pop()) + 0.5)
      .attr("dy", "0.32em")
      .attr("fill", "#000")
      .attr("font-weight", "bold")
      .attr("text-anchor", "start");

  var loss_legend = g.append("g")
      .attr("font-family", "sans-serif")
      .attr("font-size", 10)
      .attr("text-anchor", "end")
    .selectAll("g")
    .data(loss_keys.slice().reverse())
    .enter().append("g")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  loss_legend.append("rect")
      .attr("x", width - 19)
      .attr("width", 19)
      .attr("height", 19)
      .attr("fill", loss_z);

  loss_legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9.5)
      .attr("dy", "0.32em")
      .text(function(d) { return d; });
});

  // Prep the tooltip bits, initial display is hidden
  var loss_tooltip = loss_svg.append("g")
    .attr("class", "tooltip")
    .style("display", "none");
      
  loss_tooltip.append("rect")
    .attr("width", 60)
    .attr("height", 20)
    .attr("fill", "white")
    .style("opacity", 0.5);

  loss_tooltip.append("text")
    .attr("x", 30)
    .attr("dy", "1.2em")
    .style("text-anchor", "middle")
    .attr("font-size", "12px")
    .attr("font-weight", "bold");
}
    var slideIndex = 2;
    showDivs(slideIndex);

    function plusDivs(n) {
      showDivs(slideIndex += n);
    }

    function currentDiv(n) {
      showDivs(slideIndex = n);
    }

    function showDivs(n) {

      var i;
      // var x = document.getElementsByClassName("grids");
      var length = 5;
      var navBtns = document.getElementsByClassName("nav-btn");
      for (i = 0; i < navBtns.length; i++) {
        navBtns[i].className = navBtns[i].className.replace(" active", "");
      }
      if (n == 1) {
        window.location.href = "first.html";
      }
      if (n == 3) {
        window.location.href = "third.html";
      }
      navBtns[slideIndex].className += " active";
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
</script>
<body>